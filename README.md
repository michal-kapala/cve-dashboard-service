# Overview
Basic Node.js microservice for CVE (Common Vulnerabilities and Exposures) information management made using [gRPC](https://grpc.io/) and [PocketBase](https://pocketbase.io/).

# Tech

- [nice-grpc](https://github.com/deeplay-io/nice-grpc)
- [PocketBase JS SDK](https://github.com/pocketbase/js-sdk)

# Config

Required environment variables (define in `.env`):

- `POCKETBASE_URL` - PocketBase instance, defaults to `http://localhost:8090`
- `POCKETBASE_ADMIN_EMAIL` - PocketBase superadmin email for authentication
- `POCKETBASE_ADMIN_PASSWORD` - PocketBase superadmin password for authentication
- `GRPC_AUTH_URL` - [cve-dashboard-auth](https://github.com/michal-kapala/cve-dashboard-auth) service URL, defaults to `localhost:50051`

# Codegen
Generate gRPC code with:

```
.\node_modules\.bin\grpc_tools_node_protoc \
--plugin=protoc-gen-ts_proto=.\node_modules\.bin\protoc-gen-ts_proto.cmd \
--ts_proto_out="<absolute path of root dir>\proto\compiled_proto" \
--ts_proto_opt="outputServices=nice-grpc,outputServices=generic-definitions,useExactTypes=false" \
--proto_path=./proto \
./proto/<filename>.proto
```
